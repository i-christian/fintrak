import{i as e,t as g,e as H,p as t,r as oe,c as I,g as N,k as x,F as V,A as be,B as ce,C as me,D as pe,E as xe,G as ge,H as fe,v as $e,S as he,M as se,j as ye,l as ie,I as _e}from"./index-Kzrt8g3L.js";var ve=g('<section class="p-2 border bg-slate-300 rounded-md"><header class="text-center font-bold text-2xl">Monthly Summary</header><div class="mt-5 ml-5 text-md"><p class="text-md font-bold text-blue-900">Income: </p><p class="text-md font-bold text-red-900">Expense: ');const Se=l=>{var _,$,i,h;const a=(($=(_=l.total())==null?void 0:_.find(n=>n.transaction_type==="income"))==null?void 0:$.total_amount)||"N/A",f=((h=(i=l.total())==null?void 0:i.find(n=>n.transaction_type==="expense"))==null?void 0:h.total_amount)||"N/A";return(()=>{var n=ve(),b=n.firstChild,o=b.nextSibling,c=o.firstChild;c.firstChild;var m=c.nextSibling;return m.firstChild,e(c,a,null),e(m,f,null),n})()};var we=g('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white p-5 rounded shadow-lg max-w-md w-full"><h2 class="text-xl font-bold mb-4">Add New Transaction</h2><form><div class=mb-4><label class="block text-sm font-medium mb-2"for=category>Category</label><select id=category class="w-full p-2 border rounded"><option value="">Select a category</option></select></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=amount>Amount</label><input id=amount type=number placeholder=Amount class="w-full p-2 border rounded"></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=notes>Notes</label><textarea id=notes placeholder=Notes class="w-full p-2 border rounded"></textarea></div><div class="flex justify-end gap-2"><button type=button class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button><button type=submit class="bg-green-500 text-white px-4 py-2 rounded">Add'),Ce=g('<div class="bg-red-100 text-red-700 p-2 mb-4 rounded text-sm">'),Te=g("<option> (<!>)");const ke=l=>{const[a,f]=t(""),[_,$]=t([]),[i,h]=t(0),[n,b]=t(""),[o,c]=t(""),m=async()=>{c("");try{const E=await ce();$(E)}catch{c("categories not found")}};oe(()=>m());const v=async()=>{c("");try{if(!a())throw new Error("Please select a category.");if(i()<=0)throw new Error("Amount must be greater than zero.");await be(a(),i(),n()),l.onSuccess()}catch{c("An unexpected error occurred")}};return(()=>{var E=we(),A=E.firstChild,r=A.firstChild,S=r.nextSibling,Y=S.firstChild,w=Y.firstChild,D=w.nextSibling;D.firstChild;var M=Y.nextSibling,C=M.firstChild,T=C.nextSibling,O=M.nextSibling,P=O.firstChild,p=P.nextSibling,F=O.nextSibling,z=F.firstChild;return e(A,(()=>{var d=I(()=>!!o());return()=>d()&&(()=>{var k=Ce();return e(k,o),k})()})(),S),S.addEventListener("submit",d=>{d.preventDefault(),v()}),D.$$input=d=>f(d.currentTarget.value),e(D,N(V,{get each(){return _()},children:d=>(()=>{var k=Te(),u=k.firstChild,j=u.nextSibling;return j.nextSibling,e(k,()=>d.category_name,u),e(k,()=>d.transaction_type,j),x(()=>k.value=d.category_name),k})()}),null),T.$$input=d=>h(Number(d.currentTarget.value)),p.$$input=d=>b(d.currentTarget.value),z.$$click=()=>l.setOpen(!1),x(()=>D.value=a()),x(()=>T.value=i()),x(()=>p.value=n()),E})()};H(["input","click"]);var Ee=g('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white p-5 rounded shadow-lg max-w-md w-full"><h2 class="text-xl font-bold mb-4">Filter Transactions</h2><form><div class=mb-4><label class="block text-sm font-medium mb-2"for=year>Year</label><select id=year class="w-full p-2 border rounded"><option value="">Select Year</option><option> (Last year)</option><option> (Current year)</option></select></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=month>Month</label><select id=month class="w-full p-2 border rounded"><option value="">Select Month</option></select></div><div class="flex justify-end gap-2"><button type=button class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button><button type=submit class="bg-green-500 text-white px-4 py-2 rounded">Apply'),Ae=g('<div class="bg-red-100 text-red-700 p-2 mb-4 rounded text-sm">'),De=g("<option>");const Fe=l=>{const[a,f]=t(""),[_,$]=t(""),[i,h]=t(""),n=async()=>{h("");try{if(!a())throw new Error("Please select a year");if(!_())throw new Error("Please select a month");const b=await me(a(),_());l.handleFilterSuccess(b),l.setFilterOpen(!1)}catch{h(`No data found: ${i}`)}};return(()=>{var b=Ee(),o=b.firstChild,c=o.firstChild,m=c.nextSibling,v=m.firstChild,E=v.firstChild,A=E.nextSibling,r=A.firstChild,S=r.nextSibling,Y=S.firstChild,w=S.nextSibling,D=w.firstChild,M=v.nextSibling,C=M.firstChild,T=C.nextSibling;T.firstChild;var O=M.nextSibling,P=O.firstChild;return e(o,(()=>{var p=I(()=>!!i());return()=>p()&&(()=>{var F=Ae();return e(F,i),F})()})(),m),m.addEventListener("submit",p=>{p.preventDefault(),n()}),A.$$input=p=>f(p.currentTarget.value),e(S,()=>new Date().getFullYear()-1,Y),e(w,()=>new Date().getFullYear(),D),T.$$input=p=>$(p.currentTarget.value),e(T,()=>[...Array(12)].map((p,F)=>(()=>{var z=De();return e(z,()=>(F+1).toString()),x(()=>z.value=(F+1).toString()),z})()),null),P.$$click=()=>l.setFilterOpen(!1),x(()=>S.value=(new Date().getFullYear()-1).toString()),x(()=>w.value=new Date().getFullYear().toString()),x(()=>A.value=a()),x(()=>T.value=_()),b})()};H(["input","click"]);var Ne=g('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white p-5 rounded shadow-lg max-w-md w-full"><h2 class="text-xl font-bold mb-4">Edit Transaction</h2><form><div class=mb-4><label class="block text-sm font-medium mb-2"for=category>Category</label><select id=category class="w-full p-2 border rounded"><option value="">Select a category</option></select></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=transactionType>Transaction Type</label><div id=transactionType class="flex gap-4"><label class="flex items-center gap-2"><input type=radio name=transactionType value=income>Income</label><label class="flex items-center gap-2"><input type=radio name=transactionType value=expense>Expense</label></div></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=amount>Amount</label><input id=amount type=number class="w-full p-2 border rounded"></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=notes>Notes</label><textarea id=notes class="w-full p-2 border rounded"></textarea></div><div class="flex justify-end gap-2"><button type=button class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button><button type=submit class="bg-blue-500 text-white px-4 py-2 rounded">Update'),Me=g('<div class="bg-red-100 text-red-700 p-2 mb-4 rounded text-sm">'),Oe=g("<option> (<!>)");const je=l=>{const[a,f]=t(null),[_,$]=t([]),[i,h]=t(0),[n,b]=t(null),[o,c]=t("income"),[m,v]=t(""),E=async()=>{v("");try{const r=await ce();$(r)}catch{v("Categories not found.")}};oe(()=>{E();const r=l.transaction();r&&(f(r.category_name),h(r.amount),b(r.notes),c(r.transaction_type))});const A=async()=>{v("");try{if(!a())throw new Error("Please select a category.");if(i()<=0)throw new Error("Amount must be greater than zero.");await pe(l.transaction().trans_id,a(),o(),i(),n()),l.onSuccess()}catch(r){console.error(r),v("An unexpected error occurred.")}};return(()=>{var r=Ne(),S=r.firstChild,Y=S.firstChild,w=Y.nextSibling,D=w.firstChild,M=D.firstChild,C=M.nextSibling;C.firstChild;var T=D.nextSibling,O=T.firstChild,P=O.nextSibling,p=P.firstChild,F=p.firstChild,z=p.nextSibling,d=z.firstChild,k=T.nextSibling,u=k.firstChild,j=u.nextSibling,U=k.nextSibling,q=U.firstChild,R=q.nextSibling,J=U.nextSibling,K=J.firstChild;return e(S,(()=>{var y=I(()=>!!m());return()=>y()&&(()=>{var L=Me();return e(L,m),L})()})(),w),w.addEventListener("submit",y=>{y.preventDefault(),A()}),C.$$input=y=>f(y.currentTarget.value),e(C,N(V,{get each(){return _()},children:y=>(()=>{var L=Oe(),s=L.firstChild,B=s.nextSibling;return B.nextSibling,e(L,()=>y.category_name,s),e(L,()=>y.transaction_type,B),x(()=>L.value=y.category_name),L})()}),null),F.addEventListener("change",()=>c("income")),d.addEventListener("change",()=>c("expense")),j.$$input=y=>h(Number(y.currentTarget.value)),R.$$input=y=>b(y.currentTarget.value),K.$$click=()=>l.setOpen(!1),x(()=>C.value=a()||""),x(()=>F.checked=o()==="income"),x(()=>d.checked=o()==="expense"),x(()=>j.value=i()||""),x(()=>R.value=n()||""),r})()};H(["input","click"]);var Le=g('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white p-5 rounded shadow-lg max-w-sm w-full"><h2 class="text-xl font-bold mb-4">Delete Transaction</h2><p>Are you sure you want to delete this transaction?</p><div class="flex justify-end gap-2 mt-4"><button type=button class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button><button type=button class="bg-red-500 text-white px-4 py-2 rounded">Delete'),Ye=g('<div class="bg-red-100 text-red-700 p-2 mb-4 rounded text-sm">');const ze=l=>{const[a,f]=t(""),_=async()=>{f("");try{await xe(l.transaction().trans_id),l.onSuccess()}catch($){console.log($),f("An unexpected error occurred")}};return(()=>{var $=Le(),i=$.firstChild,h=i.firstChild,n=h.nextSibling,b=n.nextSibling,o=b.firstChild,c=o.nextSibling;return e(i,(()=>{var m=I(()=>!!a());return()=>m()&&(()=>{var v=Ye();return e(v,a),v})()})(),n),o.$$click=()=>l.setOpen(!1),c.$$click=_,$})()};H(["click"]);var Re=g('<span class="text-red-500 text-xl p-4 my-2">No available data'),Ie=g('<main><div class="flex gap-2 flex-wrap sm:flex-nowrap sm:gap-5"><button class=btn>New</button><button class=btn></button></div><p class="mt-5 py-2 border-t-2 border-black text-center text-xl"></p><section class="overflow-x-auto p-4"><table class="min-w-full table-auto border-collapse"><thead><tr class="bg-gray-100 text-left"><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Date</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Amount</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Category</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700 hidden md:block">Type</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Notes</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Actions</th></tr></thead><tbody>'),Pe=g("<div>Loading..."),Ue=g('<tr><td class="px-4 py-2 text-sm text-gray-600"></td><td class="px-4 py-2 text-sm text-gray-900 font-semibold"></td><td class="px-4 py-2 text-sm text-gray-700"></td><td class="px-4 py-2 text-sm hidden md:block text-gray-700"></td><td class="px-4 py-2 text-sm text-gray-600"><p></p><button class="text-blue-500 text-xs hover:underline"></button></td><td class="px-4 py-2 text-sm flex gap-1"><button class="bg-blue-500 text-white px-3 py-1 rounded-md hover:bg-blue-600 text-xs">Edit</button><button class="bg-red-500 text-white px-3 py-1 rounded-md hover:bg-red-600 text-xs">Delete');const Ge=()=>{const[l,{refetch:a}]=ge(fe),[f,_]=t(!1),[$,i]=t([]),[h,n]=t(!1),[b,o]=t(!1),[c,m]=t("Recent transactions"),[v,E]=t([]),[A,r]=t(!1),S=()=>_(!f()),[Y,w]=t(!1),[D,M]=t(!1),[C,T]=t(null),O=async()=>{const u=await _e();i(u),m("Recent transactions"),r(!1)},P=()=>{A()?(m("Recent transactions"),r(!1)):o(!0)},p=u=>{E(u),m("Filtered transactions"),r(!0),o(!1)},F=async()=>{await O(),a(),n(!1)},z=async()=>{await O(),a(),M(!1)},d=async()=>{await O(),a(),w(!1)},k=(u,j)=>new Intl.NumberFormat("en-US",{style:"currency",currency:u}).format(j);return $e(()=>{O()}),(()=>{var u=Ie(),j=u.firstChild,U=j.firstChild,q=U.nextSibling,R=j.nextSibling,J=R.nextSibling,K=J.firstChild,y=K.firstChild,L=y.nextSibling;return e(u,N(ye,{get fallback(){return Pe()},get children(){return N(he,{get children(){return[N(se,{get when(){return l.state==="errored"},get children(){return Re()}}),N(se,{get when(){return l.state==="ready"},get children(){return N(Se,{total:l})}})]}})}}),j),U.$$click=()=>n(!0),q.$$click=P,e(q,()=>A()?"Recent":"Filter"),e(u,(()=>{var s=I(()=>!!h());return()=>s()&&N(ke,{open:h,setOpen:n,onSuccess:F})})(),R),e(u,(()=>{var s=I(()=>!!b());return()=>s()&&N(Fe,{filterOpen:b,setFilterOpen:o,handleFilterSuccess:p})})(),R),e(u,(()=>{var s=I(()=>!!(Y()&&C()));return()=>s()&&N(je,{open:Y,setOpen:w,transaction:C,onSuccess:d})})(),R),e(u,(()=>{var s=I(()=>!!(D()&&C()));return()=>s()&&N(ze,{open:D,setOpen:M,transaction:C,onSuccess:z})})(),R),e(R,c),e(L,N(V,{get each(){return I(()=>!!A())()?v():$()},children:s=>(()=>{var B=Ue(),W=B.firstChild,X=W.nextSibling,Z=X.nextSibling,ee=Z.nextSibling,te=ee.nextSibling,Q=te.firstChild,le=Q.nextSibling,de=te.nextSibling,ne=de.firstChild,ue=ne.nextSibling;return e(W,()=>new Date(s.transaction_date).toLocaleString()),e(X,()=>k(s.currency,s.amount)),e(Z,()=>s.category_name),e(ee,()=>s.transaction_type),e(Q,()=>s.notes),le.$$click=S,e(le,()=>f()?"Show Less":"Show More"),ne.$$click=()=>{T(s),w(!0)},ue.$$click=()=>{T(s),M(!0)},x(G=>{var ae=`hover:bg-gray-50 ${s.transaction_type==="expense"?"bg-red-200":"bg-blue-200"}`,re=`${f()?"line-clamp-none":"line-clamp-2"} text-sm`;return ae!==G.e&&ie(B,G.e=ae),re!==G.t&&ie(Q,G.t=re),G},{e:void 0,t:void 0}),B})()})),u})()};H(["click"]);export{Ge as default};
