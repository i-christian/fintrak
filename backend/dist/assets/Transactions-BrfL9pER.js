import{i as e,t as f,e as J,p as t,r as oe,c as P,g as N,k as g,F as V,I as be,H as ce,J as me,K as pe,L as xe,N as ge,O as fe,v as $e,S as he,M as se,j as ye,l as ie,P as _e}from"./index-DjaR5TfE.js";var ve=f('<section class="p-2 border bg-slate-300 rounded-md"><header class="text-center font-bold text-2xl">Monthly Summary</header><div class="mt-5 ml-5 text-md"><p class="text-md font-bold text-blue-900">Income: </p><p class="text-md font-bold text-red-900">Expense: ');const Se=l=>{var v,h,s,y;const a=((h=(v=l.total())==null?void 0:v.find(n=>n.transaction_type==="income"))==null?void 0:h.total_amount)||"N/A",$=((y=(s=l.total())==null?void 0:s.find(n=>n.transaction_type==="expense"))==null?void 0:y.total_amount)||"N/A";return(()=>{var n=ve(),b=n.firstChild,o=b.nextSibling,c=o.firstChild;c.firstChild;var m=c.nextSibling;return m.firstChild,e(c,a,null),e(m,$,null),n})()};var we=f('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white p-5 rounded shadow-lg max-w-md w-full"><h2 class="text-xl font-bold mb-4">Add New Transaction</h2><form><div class=mb-4><label class="block text-sm font-medium mb-2"for=category>Category</label><select id=category class="w-full p-2 border rounded"><option value="">Select a category</option></select></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=amount>Amount</label><input id=amount type=number placeholder=Amount class="w-full p-2 border rounded"></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=notes>Notes</label><textarea id=notes placeholder=Notes class="w-full p-2 border rounded"></textarea></div><div class="flex justify-end gap-2"><button type=button class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button><button type=submit class="bg-green-500 text-white px-4 py-2 rounded">Add'),Ce=f('<div class="bg-red-100 text-red-700 p-2 mb-4 rounded text-sm">'),Te=f("<option> (<!>)");const ke=l=>{const[a,$]=t(""),[v,h]=t([]),[s,y]=t(0),[n,b]=t(""),[o,c]=t(""),m=async()=>{c("");try{const E=await ce();h(E)}catch{c("categories not found")}};oe(()=>m());const p=async()=>{c("");try{if(!a())throw new Error("Please select a category.");if(s()<=0)throw new Error("Amount must be greater than zero.");await be(a(),s(),n()),l.onSuccess()}catch{c("An unexpected error occurred")}};return(()=>{var E=we(),A=E.firstChild,i=A.firstChild,S=i.nextSibling,Y=S.firstChild,w=Y.firstChild,D=w.nextSibling;D.firstChild;var O=Y.nextSibling,C=O.firstChild,T=C.nextSibling,M=O.nextSibling,I=M.firstChild,x=I.nextSibling,F=M.nextSibling,z=F.firstChild;return e(A,(()=>{var d=P(()=>!!o());return()=>d()&&(()=>{var k=Ce();return e(k,o),k})()})(),S),S.addEventListener("submit",d=>{d.preventDefault(),p()}),D.$$input=d=>$(d.currentTarget.value),e(D,N(V,{get each(){return v()},children:d=>(()=>{var k=Te(),u=k.firstChild,L=u.nextSibling;return L.nextSibling,e(k,()=>d.category_name,u),e(k,()=>d.transaction_type,L),g(()=>k.value=d.category_name),k})()}),null),T.$$input=d=>y(Number(d.currentTarget.value)),x.$$input=d=>b(d.currentTarget.value),z.$$click=()=>l.setOpen(!1),g(()=>D.value=a()),g(()=>T.value=s()),g(()=>x.value=n()),E})()};J(["input","click"]);var Ee=f('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white p-5 rounded shadow-lg max-w-md w-full"><h2 class="text-xl font-bold mb-4">Filter Transactions</h2><form><div class=mb-4><label class="block text-sm font-medium mb-2"for=year>Year</label><select id=year class="w-full p-2 border rounded"><option value="">Select Year</option><option> (Last year)</option><option> (Current year)</option></select></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=month>Month</label><select id=month class="w-full p-2 border rounded"><option value="">Select Month</option></select></div><div class="flex justify-end gap-2"><button type=button class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button><button type=submit class="bg-green-500 text-white px-4 py-2 rounded">Apply'),Ae=f('<div class="bg-red-100 text-red-700 p-2 mb-4 rounded text-sm">'),De=f("<option>");const Fe=l=>{const[a,$]=t(""),[v,h]=t(""),[s,y]=t(""),n=async()=>{y("");try{if(!a())throw new Error("Please select a year");if(!v())throw new Error("Please select a month");const b=await me(a(),v());l.handleFilterSuccess(b),l.setFilterOpen(!1)}catch{y(`No data found: ${s}`)}};return(()=>{var b=Ee(),o=b.firstChild,c=o.firstChild,m=c.nextSibling,p=m.firstChild,E=p.firstChild,A=E.nextSibling,i=A.firstChild,S=i.nextSibling,Y=S.firstChild,w=S.nextSibling,D=w.firstChild,O=p.nextSibling,C=O.firstChild,T=C.nextSibling;T.firstChild;var M=O.nextSibling,I=M.firstChild;return e(o,(()=>{var x=P(()=>!!s());return()=>x()&&(()=>{var F=Ae();return e(F,s),F})()})(),m),m.addEventListener("submit",x=>{x.preventDefault(),n()}),A.$$input=x=>$(x.currentTarget.value),e(S,()=>new Date().getFullYear()-1,Y),e(w,()=>new Date().getFullYear(),D),T.$$input=x=>h(x.currentTarget.value),e(T,()=>[...Array(12)].map((x,F)=>(()=>{var z=De();return e(z,()=>(F+1).toString()),g(()=>z.value=(F+1).toString()),z})()),null),I.$$click=()=>l.setFilterOpen(!1),g(()=>S.value=(new Date().getFullYear()-1).toString()),g(()=>w.value=new Date().getFullYear().toString()),g(()=>A.value=a()),g(()=>T.value=v()),b})()};J(["input","click"]);var Ne=f('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white p-5 rounded shadow-lg max-w-md w-full"><h2 class="text-xl font-bold mb-4">Edit Transaction</h2><form><div class=mb-4><label class="block text-sm font-medium mb-2"for=category>Category</label><select id=category class="w-full p-2 border rounded"><option value="">Select a category</option></select></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=transactionType>Transaction Type</label><div id=transactionType class="flex gap-4"><label class="flex items-center gap-2"><input type=radio name=transactionType value=income>Income</label><label class="flex items-center gap-2"><input type=radio name=transactionType value=expense>Expense</label></div></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=amount>Amount</label><input id=amount type=number class="w-full p-2 border rounded"></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=notes>Notes</label><textarea id=notes class="w-full p-2 border rounded"></textarea></div><div class="flex justify-end gap-2"><button type=button class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button><button type=submit class="bg-blue-500 text-white px-4 py-2 rounded">Update'),Oe=f('<div class="bg-red-100 text-red-700 p-2 mb-4 rounded text-sm">'),Me=f("<option> (<!>)");const Le=l=>{const[a,$]=t(null),[v,h]=t([]),[s,y]=t(0),[n,b]=t(null),[o,c]=t("income"),[m,p]=t(""),E=async()=>{p("");try{const i=await ce();h(i)}catch{p("Categories not found.")}};oe(()=>{E();const i=l.transaction();i&&($(i.category_name),y(i.amount),b(i.notes),c(i.transaction_type))});const A=async()=>{p("");try{a()||p("Please select a category."),s()<=0&&p("Amount must be greater than zero."),await pe(l.transaction().trans_id,a(),o(),s(),n()),l.onSuccess()}catch{p("An unexpected error occurred.")}};return(()=>{var i=Ne(),S=i.firstChild,Y=S.firstChild,w=Y.nextSibling,D=w.firstChild,O=D.firstChild,C=O.nextSibling;C.firstChild;var T=D.nextSibling,M=T.firstChild,I=M.nextSibling,x=I.firstChild,F=x.firstChild,z=x.nextSibling,d=z.firstChild,k=T.nextSibling,u=k.firstChild,L=u.nextSibling,U=k.nextSibling,K=U.firstChild,R=K.nextSibling,q=U.nextSibling,G=q.firstChild;return e(S,(()=>{var _=P(()=>!!m());return()=>_()&&(()=>{var j=Oe();return e(j,m),j})()})(),w),w.addEventListener("submit",_=>{_.preventDefault(),A()}),C.$$input=_=>$(_.currentTarget.value),e(C,N(V,{get each(){return v()},children:_=>(()=>{var j=Me(),r=j.firstChild,B=r.nextSibling;return B.nextSibling,e(j,()=>_.category_name,r),e(j,()=>_.transaction_type,B),g(()=>j.value=_.category_name),j})()}),null),F.addEventListener("change",()=>c("income")),d.addEventListener("change",()=>c("expense")),L.$$input=_=>y(Number(_.currentTarget.value)),R.$$input=_=>b(_.currentTarget.value),G.$$click=()=>l.setOpen(!1),g(()=>C.value=a()||""),g(()=>F.checked=o()==="income"),g(()=>d.checked=o()==="expense"),g(()=>L.value=s()||""),g(()=>R.value=n()||""),i})()};J(["input","click"]);var je=f('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white p-5 rounded shadow-lg max-w-sm w-full"><h2 class="text-xl font-bold mb-4">Delete Transaction</h2><p>Are you sure you want to delete this transaction?</p><div class="flex justify-end gap-2 mt-4"><button type=button class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button><button type=button class="bg-red-500 text-white px-4 py-2 rounded">Delete'),Ye=f('<div class="bg-red-100 text-red-700 p-2 mb-4 rounded text-sm">');const ze=l=>{const[a,$]=t(""),v=async()=>{$("");try{await xe(l.transaction().trans_id),l.onSuccess()}catch(h){console.log(h),$("An unexpected error occurred")}};return(()=>{var h=je(),s=h.firstChild,y=s.firstChild,n=y.nextSibling,b=n.nextSibling,o=b.firstChild,c=o.nextSibling;return e(s,(()=>{var m=P(()=>!!a());return()=>m()&&(()=>{var p=Ye();return e(p,a),p})()})(),n),o.$$click=()=>l.setOpen(!1),c.$$click=v,h})()};J(["click"]);var Re=f('<span class="text-red-500 text-xl p-4 my-2">No available data'),Pe=f('<main><div class="flex gap-2 flex-wrap sm:flex-nowrap sm:gap-5"><button class=btn>New</button><button class=btn></button></div><p class="mt-5 py-2 border-t-2 border-black text-center text-xl"></p><section class="overflow-x-auto p-4"><table class="min-w-full table-auto border-collapse"><thead><tr class="bg-gray-100 text-left"><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Date</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Amount</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Category</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700 hidden md:block">Type</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Notes</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Actions</th></tr></thead><tbody>'),Ie=f("<div>Loading..."),Ue=f('<tr><td class="px-4 py-2 text-sm text-gray-600"></td><td class="px-4 py-2 text-sm text-gray-900 font-semibold"></td><td class="px-4 py-2 text-sm text-gray-700"></td><td class="px-4 py-2 text-sm hidden md:block text-gray-700"></td><td class="px-4 py-2 text-sm text-gray-600"><p></p><button class="text-blue-500 text-xs hover:underline"></button></td><td class="px-4 py-2 text-sm flex gap-1"><button class="bg-blue-500 text-white px-3 py-1 rounded-md hover:bg-blue-600 text-xs">Edit</button><button class="bg-red-500 text-white px-3 py-1 rounded-md hover:bg-red-600 text-xs">Delete');const He=()=>{const[l,{refetch:a}]=ge(fe),[$,v]=t(!1),[h,s]=t([]),[y,n]=t(!1),[b,o]=t(!1),[c,m]=t("Recent transactions"),[p,E]=t([]),[A,i]=t(!1),S=()=>v(!$()),[Y,w]=t(!1),[D,O]=t(!1),[C,T]=t(null),M=async()=>{const u=await _e();s(u),m("Recent transactions"),i(!1)},I=()=>{A()?(m("Recent transactions"),i(!1)):o(!0)},x=u=>{E(u),m("Filtered transactions"),i(!0),o(!1)},F=async()=>{await M(),a(),n(!1)},z=async()=>{await M(),a(),O(!1)},d=async()=>{await M(),a(),w(!1)},k=(u,L)=>new Intl.NumberFormat("en-US",{style:"currency",currency:u}).format(L);return $e(()=>{M()}),(()=>{var u=Pe(),L=u.firstChild,U=L.firstChild,K=U.nextSibling,R=L.nextSibling,q=R.nextSibling,G=q.firstChild,_=G.firstChild,j=_.nextSibling;return e(u,N(ye,{get fallback(){return Ie()},get children(){return N(he,{get children(){return[N(se,{get when(){return l.state==="errored"},get children(){return Re()}}),N(se,{get when(){return l.state==="ready"},get children(){return N(Se,{total:l})}})]}})}}),L),U.$$click=()=>n(!0),K.$$click=I,e(K,()=>A()?"Recent":"Filter"),e(u,(()=>{var r=P(()=>!!y());return()=>r()&&N(ke,{open:y,setOpen:n,onSuccess:F})})(),R),e(u,(()=>{var r=P(()=>!!b());return()=>r()&&N(Fe,{filterOpen:b,setFilterOpen:o,handleFilterSuccess:x})})(),R),e(u,(()=>{var r=P(()=>!!(Y()&&C()));return()=>r()&&N(Le,{open:Y,setOpen:w,transaction:C,onSuccess:d})})(),R),e(u,(()=>{var r=P(()=>!!(D()&&C()));return()=>r()&&N(ze,{open:D,setOpen:O,transaction:C,onSuccess:z})})(),R),e(R,c),e(j,N(V,{get each(){return P(()=>!!A())()?p():h()},children:r=>(()=>{var B=Ue(),W=B.firstChild,X=W.nextSibling,Z=X.nextSibling,ee=Z.nextSibling,te=ee.nextSibling,Q=te.firstChild,le=Q.nextSibling,de=te.nextSibling,ne=de.firstChild,ue=ne.nextSibling;return e(W,()=>new Date(r.transaction_date).toLocaleString()),e(X,()=>k(r.currency,r.amount)),e(Z,()=>r.category_name),e(ee,()=>r.transaction_type),e(Q,()=>r.notes),le.$$click=S,e(le,()=>$()?"Show Less":"Show More"),ne.$$click=()=>{T(r),w(!0)},ue.$$click=()=>{T(r),O(!0)},g(H=>{var ae=`hover:bg-gray-50 ${r.transaction_type==="expense"?"bg-red-200":"bg-blue-200"}`,re=`${$()?"line-clamp-none":"line-clamp-2"} text-sm`;return ae!==H.e&&ie(B,H.e=ae),re!==H.t&&ie(Q,H.t=re),H},{e:void 0,t:void 0}),B})()})),u})()};J(["click"]);export{He as default};
