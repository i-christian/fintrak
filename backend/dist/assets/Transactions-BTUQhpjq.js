import{i as t,t as x,e as R,p as s,r as J,c as z,g as C,k as y,F as H,A as K,B as Q,C as V,D as W,E as X,S as Z,M as U,j as ee,l as q,G as te}from"./index-DIweesCP.js";var le=x('<section class="p-2 border bg-slate-300 rounded-md"><header class="text-center font-bold text-2xl">Monthly Summary</header><div class="mt-5 ml-5 text-md"><p class="text-md font-bold text-blue-900">Income: </p><p class="text-md font-bold text-red-900">Expense: ');const re=a=>{var p,k,o,g;const d=((k=(p=a.total())==null?void 0:p.find(n=>n.transaction_type==="income"))==null?void 0:k.total_amount)||"N/A",_=((g=(o=a.total())==null?void 0:o.find(n=>n.transaction_type==="expense"))==null?void 0:g.total_amount)||"N/A";return(()=>{var n=le(),i=n.firstChild,f=i.nextSibling,c=f.firstChild;c.firstChild;var $=c.nextSibling;return $.firstChild,t(c,d,null),t($,_,null),n})()};var ne=x('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white p-5 rounded shadow-lg max-w-md w-full"><h2 class="text-xl font-bold mb-4">Add New Transaction</h2><form><div class=mb-4><label class="block text-sm font-medium mb-2"for=category>Category</label><select id=category class="w-full p-2 border rounded"><option value="">Select a category</option></select></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=amount>Amount</label><input id=amount type=number placeholder=Amount class="w-full p-2 border rounded"></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=notes>Notes</label><textarea id=notes placeholder=Notes class="w-full p-2 border rounded"></textarea></div><div class="flex justify-end gap-2"><button type=button class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button><button type=submit class="bg-green-500 text-white px-4 py-2 rounded">Add'),ae=x('<div class="bg-red-100 text-red-700 p-2 mb-4 rounded text-sm">'),se=x("<option> (<!>)");const oe=a=>{const[d,_]=s(""),[p,k]=s([]),[o,g]=s(0),[n,i]=s(""),[f,c]=s(""),$=async()=>{c("");try{const u=await Q();k(u)}catch{c("categories not found")}};J(()=>$());const D=async()=>{c("");try{if(!d())throw new Error("Please select a category.");if(o()<=0)throw new Error("Amount must be greater than zero.");await K(d(),o(),n()),a.onSuccess()}catch{c("An unexpected error occurred")}};return(()=>{var u=ne(),T=u.firstChild,N=T.firstChild,l=N.nextSibling,h=l.firstChild,v=h.firstChild,F=v.nextSibling;F.firstChild;var w=h.nextSibling,M=w.firstChild,S=M.nextSibling,E=w.nextSibling,Y=E.firstChild,e=Y.nextSibling,b=E.nextSibling,A=b.firstChild;return t(T,(()=>{var r=z(()=>!!f());return()=>r()&&(()=>{var m=ae();return t(m,f),m})()})(),l),l.addEventListener("submit",r=>{r.preventDefault(),D()}),F.$$input=r=>_(r.currentTarget.value),t(F,C(H,{get each(){return p()},children:r=>(()=>{var m=se(),L=m.firstChild,j=L.nextSibling;return j.nextSibling,t(m,()=>r.category_name,L),t(m,()=>r.transaction_type,j),y(()=>m.value=r.category_name),m})()}),null),S.$$input=r=>g(Number(r.currentTarget.value)),e.$$input=r=>i(r.currentTarget.value),A.$$click=()=>a.setOpen(!1),y(()=>F.value=d()),y(()=>S.value=o()),y(()=>e.value=n()),u})()};R(["input","click"]);var ie=x('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white p-5 rounded shadow-lg max-w-md w-full"><h2 class="text-xl font-bold mb-4">Filter Transactions</h2><form><div class=mb-4><label class="block text-sm font-medium mb-2"for=year>Year</label><select id=year class="w-full p-2 border rounded"><option value="">Select Year</option><option> (Last year)</option><option> (Current year)</option></select></div><div class=mb-4><label class="block text-sm font-medium mb-2"for=month>Month</label><select id=month class="w-full p-2 border rounded"><option value="">Select Month</option></select></div><div class="flex justify-end gap-2"><button type=button class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button><button type=submit class="bg-green-500 text-white px-4 py-2 rounded">Apply'),ce=x('<div class="bg-red-100 text-red-700 p-2 mb-4 rounded text-sm">'),de=x("<option>");const ue=a=>{const[d,_]=s(""),[p,k]=s(""),[o,g]=s(""),n=async()=>{g("");try{if(!d())throw new Error("Please select a year");if(!p())throw new Error("Please select a month");const i=await V(d(),p());a.setFilteredData(i),a.setFilterOpen(!1)}catch{g(`No data found: ${o}`)}};return(()=>{var i=ie(),f=i.firstChild,c=f.firstChild,$=c.nextSibling,D=$.firstChild,u=D.firstChild,T=u.nextSibling,N=T.firstChild,l=N.nextSibling,h=l.firstChild,v=l.nextSibling,F=v.firstChild,w=D.nextSibling,M=w.firstChild,S=M.nextSibling;S.firstChild;var E=w.nextSibling,Y=E.firstChild;return t(f,(()=>{var e=z(()=>!!o());return()=>e()&&(()=>{var b=ce();return t(b,o),b})()})(),$),$.addEventListener("submit",e=>{e.preventDefault(),n()}),T.$$input=e=>_(e.currentTarget.value),t(l,()=>new Date().getFullYear()-1,h),t(v,()=>new Date().getFullYear(),F),S.$$input=e=>k(e.currentTarget.value),t(S,()=>[...Array(12)].map((e,b)=>(()=>{var A=de();return t(A,()=>(b+1).toString()),y(()=>A.value=(b+1).toString()),A})()),null),Y.$$click=()=>a.setFilterOpen(!1),y(()=>l.value=(new Date().getFullYear()-1).toString()),y(()=>v.value=new Date().getFullYear().toString()),y(()=>T.value=d()),y(()=>S.value=p()),i})()};R(["input","click"]);var be=x('<span class="text-red-500 text-xl p-4 my-2">No available data'),me=x('<main><div class="flex gap-2 flex-wrap sm:flex-nowrap sm:gap-5"><button class=btn>New</button><button class=btn>Filter</button></div><p class="mt-5 py-2 border-t-2 border-black text-center text-xl">Recent transactions</p><section class="overflow-x-auto p-4"><table class="min-w-full table-auto border-collapse"><thead><tr class="bg-gray-100 text-left"><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Date</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Amount</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Category</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700 hidden md:block">Type</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Notes</th><th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Actions</th></tr></thead><tbody>'),xe=x("<div>Loading..."),pe=x('<tr><td class="px-4 py-2 text-sm text-gray-600"></td><td class="px-4 py-2 text-sm text-gray-900 font-semibold"></td><td class="px-4 py-2 text-sm text-gray-700"></td><td class="px-4 py-2 text-sm hidden md:block text-gray-700"></td><td class="px-4 py-2 text-sm text-gray-600"><p></p><button class="text-blue-500 text-xs hover:underline"></button></td><td class="px-4 py-2 text-sm flex gap-1"><button class="bg-blue-500 text-white px-3 py-1 rounded-md hover:bg-blue-600 text-xs">Edit</button><button class="bg-red-500 text-white px-3 py-1 rounded-md hover:bg-red-600 text-xs">Delete');const fe=()=>{const[a,{refetch:d}]=W(X),[_,p]=s(!1),[k,o]=s([]),[g,n]=s(!1),[i,f]=s(!1),[c,$]=s([]),D=()=>p(!_()),u=async()=>{const l=await te();o(l)},T=async()=>{await u(),d(),n(!1)},N=(l,h)=>new Intl.NumberFormat("en-US",{style:"currency",currency:l}).format(h);return console.log(c()),u(),(()=>{var l=me(),h=l.firstChild,v=h.firstChild,F=v.nextSibling,w=h.nextSibling,M=w.nextSibling,S=M.firstChild,E=S.firstChild,Y=E.nextSibling;return t(l,C(ee,{get fallback(){return xe()},get children(){return C(Z,{get children(){return[C(U,{get when(){return a.state==="errored"},get children(){return be()}}),C(U,{get when(){return a.state==="ready"},get children(){return C(re,{total:a})}})]}})}}),h),v.$$click=()=>n(!0),F.$$click=()=>f(!0),t(l,(()=>{var e=z(()=>!!g());return()=>e()&&C(oe,{open:g,setOpen:n,onSuccess:T})})(),w),t(l,(()=>{var e=z(()=>!!i());return()=>e()&&C(ue,{filterOpen:i,setFilterOpen:f,setFilteredData:$})})(),w),t(Y,C(H,{get each(){return k()},children:e=>(()=>{var b=pe(),A=b.firstChild,r=A.nextSibling,m=r.nextSibling,L=m.nextSibling,j=L.nextSibling,P=j.firstChild,B=P.nextSibling;return t(A,()=>new Date(e.transaction_date).toLocaleString()),t(r,()=>N(e.currency,e.amount)),t(m,()=>e.category_name),t(L,()=>e.transaction_type),t(P,()=>e.notes),B.$$click=D,t(B,()=>_()?"Show Less":"Show More"),y(O=>{var I=`hover:bg-gray-50 ${e.transaction_type==="expense"?"bg-red-200":"bg-blue-200"}`,G=`${_()?"line-clamp-none":"line-clamp-2"} text-sm`;return I!==O.e&&q(b,O.e=I),G!==O.t&&q(P,O.t=G),O},{e:void 0,t:void 0}),b})()})),l})()};R(["click"]);export{fe as default};
